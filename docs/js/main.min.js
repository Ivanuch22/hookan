"use strict";const dataFormCalculator={img:"images/secondCardImg.jpg",title:"3 hookahs",text:"3 hours of service",price:"320"};try{new Swiper(".Proof__slider",{breakpoints:{320:{slidesPerView:1,spaceBetween:1e3},1190:{slidesPerView:3,spaceBetween:30}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!0})}catch{console.log("Swiper not Define")}const smoothScroll=()=>{document.querySelectorAll('a[href^="#card-block"]').forEach(e=>{e.addEventListener("click",(function(e){e.preventDefault(),document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth"})}))})};smoothScroll();const renderCheckboxFlavor=e=>{const t=document.querySelector(".sts");t.innerHTML="";for(let o=0;o<e;o++){const e=`\n    <div class="Form__popup-flavor text">\n    <div class="Form__popup-flavor-text">\n      Choose flavor for fruit head ${o+1}\n    </div>\n    <div class="Form__popup-flavor-block head${o+1} ">\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Fruity mix</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Sweet mix</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Sweet and minty mix</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Sweet and sour mix</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Spicy mix</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Surprise me</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Double Apple</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Blueberry</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Watermelon</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Mint</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Gum</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Strawberry</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Grape</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Melon</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Grapefruit</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Guava</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Kiwi</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Peach</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Orange</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Love 66</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Lady Killer</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Blue Mist</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">White Gummy Bears</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Watermelon Lit</p>\n      </label>\n      <label>\n        <input class="Form__popup-flavor-row text" type="checkbox" />\n        <p class="Form__input-text">Sex on the Beach</p>\n      </label>\n    </div>\n  </div>\n  `;t.insertAdjacentHTML("beforeend",e)}onFlavors()},renderCards=e=>{const t=document.querySelector(".Package__block");e.map(({img:e,title:o,text:n,description:a,price:l,additional:r})=>{const c=`\n    <div class="Package__card">\n    <div class="Package__card-block-img">\n      <img\n        class="Package__card-img"\n        src="${e}"\n        alt="image hookah"\n      />\n    </div>\n    <h3 class="Package__card-title">${o}</h3>\n    <p class="Package__card-description">\n      ${n}\n    </p>\n    <p class="Package__card-text">\n      ${a}\n    </p>\n    <div class="Package__card-block">\n      <p class="Package__card-price">$${l}</p>\n      <p class="Package__card-price-plus">$${r} additional day</p>\n    </div>\n    <div class="Package__card-button-block">\n      <div class="card Package__card-button buttonHover">\n        Order ${o}\n      </div>\n    </div>\n  </div>\n  \n    `;t.insertAdjacentHTML("beforeend",c)})},renderCartInForm=({img:e,title:t,text:o,price:n})=>{document.querySelectorAll(".Form__card").forEach(a=>{a.innerHTML=`\n  <div class="Form__card-img">\n                <img src="${e}" alt="" />\n              </div>\n              <div class="Form__card-text">\n                <h4 class="Form__card-text text">${t}</h4>\n                <p class="Form__card-description">\n                  ${o}\n                </p>\n              </div>\n              <div class="Form__card-prise">\n                <span class="purpure_color">$${n}</span>\n              </div>\n  `})},onFlavors=()=>{const e=document.querySelectorAll(".Form__popup-flavor-text"),t=document.querySelectorAll(".Form__popup-flavor-block");e.forEach((e,o)=>{e.addEventListener("click",()=>{t[o].classList.toggle("Form__popup-flavor-block--active")})})},onDetails=()=>{document.querySelector(".Form__popup .text").addEventListener("click",changeClassInDetails)},changeClassInDetails=()=>{const e=document.querySelector(".Form__popup .text");document.querySelector(".Form__popup-details").classList.toggle("Form__popup-details--active"),e.classList.toggle("text--active")},sendMessageToTelegram=async({img:e,title:t,text:o,description:n,price:a,additional:l},r)=>{const c="https://api.telegram.org/bot6619280299:AAGIL6f6uD5nOU1Sjw26zzqvyI0V_fZZKq0";(async()=>{const s=document.createElement("img");s.src=e,s.width=400,s.height=200;const i=document.createElement("canvas"),p=i.getContext("2d");i.width=s.width,i.height=s.height,p.drawImage(s,0,0),i.toBlob(async e=>{if(e){const s=new FormData;s.append("chat_id","-1002007095666"),s.append("photo",e,"photo.jpg");try{const e=await fetch(c+"/sendPhoto",{method:"POST",body:s}).then(e=>((()=>{const e=document.querySelector("form"),s=(new Date).toISOString().split("T")[0];let i="";const p=document.querySelectorAll('input[type="checkbox"]:checked'),d=new Array;p.forEach(e=>{const t=e.labels[0],o=e.labels[0].children[1].textContent,n=t.parentElement.classList;d.push({[n[1]]:o})});for(const e of d)for(const t in e)i+=`\n${t}: ${e[t]}`;let u="<b>Заявка з сайта! </b>";"first"===r?u+=`\nДата створення замовлення: <i>${s}</i> \nІмя замовника <i>${e.name.value}</i>\nНомер телефону <i>${e.number.value}</i>\nАдреса на яку відправити <i>${e.address.value}</i>\nДень на який потрібно <i>${e.datetime.value}</i>\n  \n<b>Вибраний пакет:</b>\nНазва: <i>${t} </i>\nТекст: <i>${o}</i>\nОпис: <i>${n}</i>\nЦіна:  <i>${a}</i> доларів\nЦіна за добавлений день: <i>${l}</i> доларів \n\n<b>Смаки на чашу</b>\n\n${i}\n      `:"second"===r&&(u+=`\nДата створення замовлення: <i>${s}</i> \nІмя замовника <i>${e.name.value}</i>\nНомер телефону <i>${e.number.value}</i>\nПочта замовника <i>${e.email.value}</i> \nАдреса на яку відправити <i>${e.address.value}</i>\nДень на який потрібно <i>${e.datetime.value}</i>\n      \n<b>Вибраний пакет:</b>\nНазва: <i>${t} </i>\nТекст: <i>${o}</i>\nЦіна:  <i>${a}</i> доларів\n          `);const m=new URLSearchParams;m.append("chat_id","-1002007095666"),m.append("text",u),m.append("parse_mode","html"),fetch(c+"/sendMessage",{method:"POST",body:m}).then(e=>e).then(e=>e.json()).then(e=>{console.log("Message sent:",e)}).catch(e=>{console.error("Error:",e)})})(),e)),i=await e.json();console.log("Image sent to Telegram:",i)}catch(e){console.error("Error sending image to Telegram:",e)}}},"image/jpeg")})()},getData=async()=>{const e=document.body,t=document.querySelector(".Form"),o=document.querySelector(".step1"),n=document.querySelector(".step2"),a=document.querySelector(".step3"),l=document.querySelectorAll(".Form__button"),r=document.querySelectorAll(".Form__field"),c=document.querySelectorAll(".Form__exit-line"),s=[];let i=0;const p=e=>{e?l.forEach(e=>{e.classList.add("onActive")}):l.forEach(e=>{e.classList.remove("onActive")})},d=o=>{o.classList.add("step--active"),e.classList.add("Active"),t.classList.add("Active"),r.forEach(e=>{e.addEventListener("input",t=>t.target.value?e.style.color="#505050":e.style.color="#B4B4B4"),e.addEventListener("change",t=>{e.style.color="#F2994A",m(t)?p(!0):p(!1)})}),document.querySelector('[name="datetime"]').min=(new Date).toISOString().split("T")[0]},u=()=>r.forEach(e=>e.style.border="1px solid #f2994a"),m=e=>{e.preventDefault();const t=[];return r.forEach(e=>e.value?t.push(!0):t.push(!1)),!t.includes(!1)||(r.forEach(e=>e.value?e.style.border="1px solid #dedede":e.style.border="1px solid #f2994a"),!1)};c.forEach(o=>{t.addEventListener("click",n=>{n.target!==t&&n.target!==o||(()=>{e.classList.remove("Active"),t.classList.remove("Active");document.querySelectorAll(".step--active").forEach(e=>{e.classList.remove("step--active")}),r.forEach(e=>{e.value="",e.style.border="1px solid #dedede"})})()})});try{await fetch("./js/data.json").then(e=>e.json()).then(e=>s.push(...e)).then(()=>{renderCards(s)}).then(()=>{document.querySelectorAll(".card").forEach((e,t)=>{e.addEventListener("click",()=>{d(o),i=t,renderCartInForm(s[t]),renderCheckboxFlavor(+s[t].text[2])})})})}catch{console.log("card is not rendered, maybe is not second page")}try{const e=document.querySelector(".Form__block");document.querySelector(".ChooseHookahs__button").addEventListener("click",()=>{d(e),renderCartInForm(dataFormCalculator)})}catch{console.log("button not found, maybe is not second page")}try{document.querySelector(".Form__popup .text").addEventListener("click",changeClassInDetails)}catch{console.log("Details not found, maybe is not first page ")}try{l[1].addEventListener("click",e=>{e.preventDefault(),sendMessageToTelegram(s[i],"first"),o.classList.remove("step--active"),n.classList.remove("step--active"),a.classList.add("step--active")})}catch{console.log("Not found form second button, maybe is not first page ")}try{l[0].addEventListener("click",e=>{if(!m(e))return u(),void changeClassInDetails();o.classList.remove("step--active"),a.classList.remove("step--active"),n.classList.add("step--active")})}catch{console.log("is not fist page")}try{const e=document.querySelector(".Form__block");if(!e)return;l[0].addEventListener("click",t=>{m(t)?(sendMessageToTelegram(dataFormCalculator,"second"),console.log("second"),e.classList.remove("step--active"),a.classList.add("step--active")):u()})}catch{console.log("is not second page")}};getData();try{const e=document.querySelector("#slider"),t=document.querySelector(".ChooseHookahs__left-input-progressbar .ChooseHookahs__left-input-fill"),o=document.querySelector(".ChooseHookahs__row:first-child"),n=document.querySelector(".ChooseHookahs__colum-button--mobile"),a=()=>{t.style.width=e.value+"%"};e.addEventListener("input",a),n.addEventListener("click",()=>o.classList.toggle("Active")),a();const l=document.querySelector(".ChooseHookahs__left-number"),r=document.querySelectorAll(".ChooseHookahs__colum-checkbox"),c=document.querySelector("#slider"),s=document.querySelector(".ChooseHookahs__rigth-price");let i=100;const p=[{name:"3 hookahs",price:100},{name:"5 hookahs",price:200},{name:"7 hookahs",price:300},{name:"9 hookahs",price:400},{name:"15 hookahs",price:500}],d=e=>{const t=e.dataset.name;dataFormCalculator.title=t;const o=p.find(e=>e.name===t);i=o.price,u()},u=(e=100,t,o)=>{o=l.innerHTML*i,s.innerHTML="$"+o,dataFormCalculator.price=o,console.group(dataFormCalculator)};for(let e of r)e.onclick=function(){d(e)};c.addEventListener("input",()=>{let e=Math.ceil(c.value/20);for(;0==e;)e=1;l.innerHTML=e,dataFormCalculator.text=e+" hours of service",u()})}catch{console.log("Is not second page")}